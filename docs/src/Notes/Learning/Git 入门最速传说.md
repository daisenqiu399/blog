---
outline: 2
updateTime: "2024-04-19 00:11"
tags: "Git/æ‰‹å†Œ"
desc: "æŒæ¡ Gitï¼Œæˆä¸ºä»£ç ç®¡ç†çš„é«˜æ‰‹ï¼ä»å®‰è£…åˆ° SSH å¯†é’¥çš„ç”Ÿæˆï¼Œå†åˆ°ä¸ GitHub çš„äº²å¯†æ¥è§¦ï¼Œæœ¬æŒ‡å—å¸¦ä½ ä¸€æ­¥æ­¥æˆä¸ºç‰ˆæœ¬æ§åˆ¶çš„å¤§å¸ˆã€‚ä¸ä»…å¦‚æ­¤ï¼Œè¿˜æœ‰ VSCode æ’ä»¶æ¨èå’Œæ“ä½œç§˜ç±ï¼Œè®©ä½ çš„å¼€å‘æµç¨‹å¦‚ä¸èˆ¬é¡ºæ»‘ã€‚"
---

## ğŸ“¦ å®‰è£…

ä¸‹è½½åœ°å€ï¼š[Git Downloads](https://git-scm.com/downloads)ï¼Œè¯·æ ¹æ®è‡ªå·±çš„æ“ä½œç³»ç»Ÿä¸æœºå™¨å‹å·é€‰æ‹©æ­£ç¡®çš„ç‰ˆæœ¬ã€‚

å®‰è£…åï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸï¼ˆå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ win æ“ä½œç³»ç»Ÿï¼‰ï¼š

1. æŒ‰ä¸‹ `Win + R` è¾“å…¥ `cmd` æ‰“å¼€ç»ˆç«¯ã€‚
2. åœ¨ç»ˆç«¯ä¸­è¿è¡Œ `git --version`ï¼Œå¦‚æœæ˜¾ç¤ºå‡ºç‰ˆæœ¬ä¿¡æ¯ï¼Œåˆ™è¯´æ˜å®‰è£…æˆåŠŸ ğŸ‰ã€‚

## ğŸ”’ èº«ä»½è®¤è¯

è¯¥æ­¥éª¤å°†è¿›è¡Œèº«ä»½è®¤è¯çš„é…ç½®ï¼Œä»¥ä¾¿åç»­æ‹‰å–ä¸ Github ä¸Šçš„ä»£ç ã€‚

ğŸ‘‰ å®˜æ–¹æ–‡æ¡£ï¼š[å…³äº SSH - GitHub æ–‡æ¡£](https://github.com/settings/keys)

#### 1. ç”Ÿæˆ ssh å¯†é’¥

è¯·åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
ssh-keygen -t ed25519 -C "your_email@example.com"
```

ä½ å°†çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼ˆæ³¨ï¼š# åçš„æ–‡æœ¬æ˜¯æ³¨è§£ï¼Œå¹¶ä¸ä¼šåœ¨ç»ˆç«¯æ˜¾ç¤ºï¼‰ï¼š

```
Generating public/private ed25519 key pair.
# è¾“å…¥ ssh å¯†é’¥çš„ä¿å­˜è·¯å¾„ï¼Œåˆæ¬¡ä½¿ç”¨æ—¶å»ºè®®ä¿æŒé»˜è®¤
Enter file in which to save the key (/root/.ssh/id_ed25519):
# è¾“å…¥è¯¥å¯†é’¥çš„å¯†ç ï¼Œå¯ä»¥ç›´æ¥å›è½¦
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
```

å®Œæˆåï¼Œä½ çš„è¯†åˆ«ä¿¡æ¯å°†è¢«ä¿å­˜åœ¨ `/root/.ssh/id_ed25519`ï¼Œå…¬é’¥åˆ™ä¿å­˜åœ¨ `/root/.ssh/id_ed25519.pub`ã€‚

#### 2. å¯åŠ¨ ssh ä»£ç†å¹¶æ·»åŠ ç§é’¥

å¯åŠ¨ ssh ä»£ç†å¹¶æ·»åŠ ç§é’¥çš„å‘½ä»¤å¦‚ä¸‹ï¼š

```bash
eval "$(ssh-agent -s)"    # è¯¥å‘½ä»¤è¿è¡ŒæˆåŠŸä¼šæ˜¾ç¤ºï¼šAgent pid xxx
ssh-add ~/.ssh/id_ed25519 # å¦‚æœä½ åœ¨ç”Ÿæˆå¯†é’¥æ—¶è‡ªå®šä¹‰äº†åç§°ï¼Œè®°å¾—åœ¨æ­¤å¤„ä¿®æ”¹
```

#### 3. å°†å…¬é’¥æ·»åŠ åˆ° Github ä¸Š

è®¿é—® [GitHub SSH keys settings](https://github.com/settings/keys)ï¼Œç‚¹å‡» "New SSH key"ã€‚

![å°†å…¬é’¥æ·»åŠ åˆ° Github ä¸Š](./img/add-sshkey.png)

#### 4. æµ‹è¯•è¿æ¥

è¿è¡Œä»¥ä¸‹å‘½ä»¤æµ‹è¯•ä¸ Github çš„è¿æ¥ï¼š

```bash
ssh -T git@github.com
```

å¦‚æœæˆåŠŸï¼Œä½ å°†çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼Œå‡ºé”™è¯·è‡ªè¡Œæ’æŸ¥ ğŸ’¤ï¼š

```
The authenticity of host 'github.com (20.205.243.166)' can't be established.
ECDSA key fingerprint is SHA256:p2QAMXNIC1TJYWeIOttrVc98/R1BUFWu3/LiyKgUfQM.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added 'github.com,20.205.243.166' (ECDSA) to the list of known hosts.
Hi ZbWeR! You've successfully authenticated, but GitHub does not provide shell access.
```

#### æ‹‰å–ä»£ç 

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‹‰å–ä»£ç åˆ°æœ¬åœ°ï¼š

```bash
git clone git@github.com:ZbWeR/xxx.git
```

## ğŸ› ï¸ VSCode æ’ä»¶æ¨è

1. **GitLens**ï¼šæ‚¬åœæç¤ºäº†è§£ä»£ç çš„æ›´æ”¹åŠå…¶ä½œè€…ï¼Œä½¿ç”¨ç”¨æˆ·å‹å¥½çš„ç¼–è¾‘å™¨å¯è§†åŒ–å’Œé…ç½®äº¤äº’å¼å˜åŸºæ“ä½œç­‰ç­‰ã€‚
2. **Git-commit-plugin**ï¼šå¿«é€Ÿç”Ÿæˆç¬¦åˆè§„èŒƒçš„ commit ä¿¡æ¯ã€‚

## åŸºæœ¬æ“ä½œ

- æŸ¥çœ‹ Git é…ç½®ï¼š`git config --list`
- Git é…ç½®ç”¨æˆ·èº«ä»½ï¼š
  ```bash
  git config --global user.name "xxx"
  git config --global user.email "xxx"
  ```
- å…‹éš†è¿œç¨‹ä»“åº“ï¼š`git clone <url>`
- å•è¡ŒæŸ¥çœ‹ commit æ—¥å¿—ï¼š`git log --oneline`
- ä»è¿œç¨‹ä»“åº“æ‹‰å–ä»£ç ï¼š`git pull` æˆ–è€… `git fetch` + `git rebase`
- æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼š`git push`

## VSCode å¯è§†åŒ–æ“ä½œ

![VSCode å¯è§†åŒ–æ“ä½œ](./img/vscode-git.png)

## ç¼“å­˜æ“ä½œ

- ä¿å­˜å·¥ä½œç›®å½•çš„ä¿®æ”¹ï¼š`git stash`
- æ¢å¤å·¥ä½œç›®å½•çš„ä¿®æ”¹ï¼š`git stash pop`
- æŸ¥çœ‹ç¼“å­˜ä¿®æ”¹ï¼š`git stash list`

## åˆ†æ”¯æ“ä½œ

- æœ¬åœ°åˆ›å»ºåˆ†æ”¯ï¼š`git checkout -b your_dev_name`
- ä¸Šä¼ è¿œç¨‹æœåŠ¡ï¼š`git push origin your_dev_name`
- æœ¬åœ°åˆ é™¤åˆ†æ”¯ï¼š`git branch -d your_dev_name`
- åˆ é™¤è¿œç¨‹åˆ†æ”¯ï¼š`git push origin --delete <branch_name>`
- åˆå¹¶å¤šä¸ª commitï¼š`git rebase -i HEAD~<num>`

## ğŸƒâ€â™‚ï¸ æƒ…æ™¯æ¨¡æ‹Ÿ

æ³¨æ„ï¼šè¯¥æƒ…æ™¯æ¨¡æ‹Ÿå»ºç«‹åœ¨ä½¿ç”¨ rebase ä½œä¸ºæ›´æ–°æ‰‹æ®µçš„æ ‡å‡†ä¸‹ã€‚

#### 1. æ–°å»ºåˆ†æ”¯è¿›è¡Œå¼€å‘

ä½ åˆšåˆšæ‹¿åˆ°ä¸€ä¸ªé¡¹ç›®ï¼Œä½ éœ€è¦æ–°å»ºä¸€ä¸ªåˆ†æ”¯è¿›è¡Œå¼€å‘

```bash
# å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°
git clone <url>
# åˆ›å»ºå¹¶åˆ‡æ¢åˆ°ä¸€ä¸ªæ–°çš„å¼€å‘åˆ†æ”¯è¿›è¡Œå¼€å‘
git checkout -b your_dev_name
```

#### 2. æäº¤ä»£ç åˆ°è¿œç¨‹ä»“åº“å¹¶åˆå…¥ä¸»åˆ†æ”¯

ä½ çš„ä»£ç å¼€å‘å®Œæ¯•ï¼Œéœ€è¦æäº¤ä»£ç åˆ°è¿œç¨‹ä»“åº“å¹¶åˆå…¥ä¸»åˆ†æ”¯ã€‚

å»ºè®®é€šè¿‡ VSCode å®ŒæˆåŸºæœ¬çš„æš‚å­˜æäº¤ç­‰æ“ä½œï¼Œæ­¤å¤„çœç•¥å‘½ä»¤è¡Œæ“ä½œï¼Œä¸‹é¢å‘½ä»¤å‡è®¾ä½ å·²ç»å®Œæˆäº†æœ¬åœ°çš„ Commitï¼š

```bash
# åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯
git checkout master
# æ‹‰å–è¿œç¨‹åˆ†æ”¯æœ€æ–°æäº¤
git pull
# åˆ‡æ¢åˆ°å¼€å‘åˆ†æ”¯
git checkout your_dev_name
# åˆå¹¶è¿œç¨‹ä¸»åˆ†æ”¯æœ€æ–°æäº¤åˆ°å½“å‰å¼€å‘åˆ†æ”¯
# å¦‚æœå‡ºç°å†²çªåˆ™åœ¨ VSCode ä¸­æ‰‹åŠ¨å¤„ç†
git rebase master
# æ¨é€åˆ°è¿œç¨‹ä»“åº“
git push
```

#### 3. ç´§æ€¥ bug ä¿®å¤

ä½ çš„ä»£ç å¼€å‘åˆ°ä¸€åŠï¼Œä½†æ˜¯çªç„¶æœ‰ç´§æ€¥ bug éœ€è¦ä¿®å¤ ğŸš¨

```bash
# æš‚å­˜å½“å‰åˆ†æ”¯çš„ä¿®æ”¹
git stash
# åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯ï¼Œæ›´æ–°ä»£ç å¹¶æ–°å»ºåˆ†æ”¯
git checkout master
git pull
git checkout -b fix/xxx
# è¿›è¡Œ bug ä¿®æ”¹ï¼Œæ¨é€åˆ°è¿œç¨‹ä»“åº“
# ...
# åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯ï¼Œæ›´æ–°ä»£ç å¹¶è¿”å›åŸå¼€å‘åˆ†æ”¯
git checkout master
git pull
git checkout your_dev_name
# åˆå¹¶ä¸»åˆ†æ”¯æ›´æ”¹å¹¶å›å¤æš‚å­˜çš„æ›´æ”¹
git rebase master
git stash pop
```

#### 4.å‹ç¼© Commit ç¾åŒ–æäº¤è®°å½•

ä½ çš„å¼€å‘åˆ†æ”¯æœ‰å¾ˆå¤šæ¬¡æäº¤ï¼Œæœ‰çš„æ—¶å€™ï¼ˆä¾‹å¦‚å…¬å¸è§„èŒƒï¼‰éœ€è¦å‹ç¼©æˆä¸€ä¸ªæäº¤ã€‚

```bash
# é€‰æ‹©éœ€è¦å‹ç¼©çš„æäº¤
git rebase -i HEAD~<num>
# åœ¨ VSCode ä¸­é€‰æ‹©éœ€è¦ä¿ç•™çš„æäº¤
# ä¿å­˜é€€å‡ºåä¼šè‡ªåŠ¨åˆå¹¶æäº¤, éšåå¤„ç†å†²çª
# å¦‚æœä½ çš„åˆ†æ”¯å·²ç»æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œéœ€è¦å¼ºåˆ¶æ¨é€
git push -f
```

#### 5. Code Review å­˜åœ¨é—®é¢˜éœ€è¦ä¿®æ”¹

ä½ çš„ä»£ç æäº¤åˆ°è¿œç¨‹ä»“åº“æäº¤äº† Pull Request ï¼Œåœ¨è¿›è¡Œ Code Review æ—¶å‘ç°äº†é—®é¢˜ï¼Œéœ€è¦ä¿®æ”¹ã€‚

```bash
git add .
git commit --amend
git push -f
```